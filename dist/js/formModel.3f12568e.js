(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["formModel"],{"0ba6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-tabs",{attrs:{type:"card"}},[a("a-tab-pane",{key:"1",attrs:{tab:"表单验证"}},[a("rules-from")],1),a("a-tab-pane",{key:"2",attrs:{tab:"动态增减表单项"}},[a("dynamic-validate-form")],1)],1),a("title-detail",{attrs:{title:"FormModel",detail:""}}),a("api-table",{attrs:{data:e.tableData}}),a("title-detail",{attrs:{title:"FormModel 事件",detail:""}}),a("api-table",{attrs:{data:e.tableDataChange}}),a("title-detail",{attrs:{title:"FormModel 方法",detail:""}}),a("api-table",{attrs:{data:e.tableDataFn}}),a("title-detail",{attrs:{title:"Form.Item",detail:""}}),a("api-table",{attrs:{data:e.tableDataItem}}),e._v(" 注意： # Form.Item 会对唯一子元素进行劫持，并监听 blur 和 change 事件，来达到自动校验的目的，所以请确保表单域没有其它元素包裹。如果有多个子元素，将只会监听第一个子元素的变化。 如果要监听的表单域不满足自动监听的条件，可以通过如下方式关联表单域： "),a("pre",{staticClass:"line-numbers"},[e._v("      "),a("code",{staticClass:"language-html",domProps:{textContent:e._s('<a-form-model-item prop="form.name" ref="name" :autoLink="false">\n        <a-input v-model="other" />\n        <span>hahha</span>\n        <div>\n          <a-input\n            v-model="form.name"\n            @blur="() => {$refs.name.onFieldBlur()}"\n            @change="() => {$refs.name.onFieldChange()}"\n          />\n        </div>\n      </a-form-model-item>')}},[e._v("\n      ")]),e._v("\n  ")]),a("title-detail",{attrs:{title:"校验规则",detail:""}}),a("api-table",{attrs:{data:e.tableDataRules}})],1)},r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("com-show",[a("y-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("y-form-model-item",{ref:"name",attrs:{label:"Activity name",prop:"name"}},[a("y-input",{on:{blur:function(){e.$refs.name.onFieldBlur()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("y-form-model-item",{attrs:{label:"Activity zone",prop:"region"}},[a("y-select",{attrs:{placeholder:"please select your zone"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("y-select-option",{attrs:{value:"shanghai"}},[e._v("Zone one")]),a("y-select-option",{attrs:{value:"beijing"}},[e._v("Zone two")])],1)],1),a("y-form-model-item",{attrs:{label:"Activity time",required:"",prop:"date1"}},[a("y-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",type:"date",placeholder:"Pick a date"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),a("y-form-model-item",{attrs:{label:"Instant delivery",prop:"delivery"}},[a("y-switch",{model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery",t)},expression:"form.delivery"}})],1),a("y-form-model-item",{attrs:{label:"Activity type",prop:"type"}},[a("y-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("y-checkbox",{attrs:{value:"1",name:"type"}},[e._v("Online")]),a("y-checkbox",{attrs:{value:"2",name:"type"}},[e._v("Promotion")]),a("y-checkbox",{attrs:{value:"3",name:"type"}},[e._v("Offline")])],1)],1),a("y-form-model-item",{attrs:{label:"Resources",prop:"resource"}},[a("y-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[a("y-radio",{attrs:{value:"1"}},[e._v("Sponsor")]),a("y-radio",{attrs:{value:"2"}},[e._v("Venue")])],1)],1),a("y-form-model-item",{attrs:{label:"Activity form",prop:"desc"}},[a("y-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("y-form-model-item",{attrs:{label:"ipv4",prop:"ip"}},[a("y-input-ip",{model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),a("y-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[a("y-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("Create")]),a("y-button",{staticStyle:{"margin-left":"10px"},on:{click:e.resetForm}},[e._v("Reset")])],1)],1),a("pre",{staticClass:"line-numbers"},[e._v("      "),a("code",{staticClass:"language-html",domProps:{textContent:e._s(e.html)}},[e._v("\n      ")]),e._v("\n    ")]),a("pre",{staticClass:"line-numbers"},[e._v("      "),a("code",{staticClass:"language-javascript"},[e._v("\n        const validator = (rules, value, callback) => {\n          const reg = /^(?:(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/;\n          if (!reg.test(value)) {\n            callback(new Error('ip 不正确'));\n          }\n          callback();\n        };\n       export default {\n          data() {\n            return {\n              labelCol: { span: 4 },\n              wrapperCol: { span: 14 },\n              other: '',\n              form: {\n                name: '',\n                region: undefined,\n                date1: undefined,\n                delivery: false,\n                type: [],\n                resource: '',\n                desc: '',\n              },\n              rules: {\n                name: [\n                  { required: true, message: 'Please input Activity name', trigger: 'blur' },\n                  { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },\n                ],\n                region: [{ required: true, message: 'Please select Activity zone', trigger: 'change' }],\n                date1: [{ required: true, message: 'Please pick a date', trigger: 'change' }],\n                type: [\n                  {\n                    type: 'array',\n                    required: true,\n                    message: 'Please select at least one activity type',\n                    trigger: 'change',\n                  },\n                ],\n                resource: [{ required: true, message: 'Please select activity resource', trigger: 'change' }],\n                desc: [{ required: true, message: 'Please input activity form', trigger: 'blur' }],\n                ip: [{ validator: validator, message: 'ip 不正确', trigger: 'blur' }],\n              },\n            };\n          },\n          methods: {\n            onSubmit() {\n              this.$refs.ruleForm.validate(valid => {\n                if (valid) {\n                  alert('submit!');\n                } else {\n                  console.log('error submit!!');\n                  return false;\n                }\n              });\n            },\n            resetForm() {\n              this.$refs.ruleForm.resetFields();\n            },\n          },\n        };\n      ")]),e._v("\n  ")])],1)},o=[],i=function(e,t,a){var n=/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/;n.test(t)||a(new Error("ip 不正确")),a()},m={data:function(){return{html:'<y-form-model ref="ruleForm" :model="form" :rules="rules" :label-col="labelCol" :wrapper-col="wrapperCol">\n        <y-form-model-item ref="name" label="Activity name" prop="name">\n          <y-input\n            v-model="form.name"\n            @blur="\n              () => {\n                $refs.name.onFieldBlur();\n              }\n            "\n          />\n        </y-form-model-item>\n        <y-form-model-item label="Activity zone" prop="region">\n          <y-select v-model="form.region" placeholder="please select your zone">\n            <y-select-option value="shanghai">Zone one</y-select-option>\n            <y-select-option value="beijing">Zone two</y-select-option>\n          </y-select>\n        </y-form-model-item>\n        <y-form-model-item label="Activity time" required prop="date1">\n          <y-date-picker v-model="form.date1" show-time type="date" placeholder="Pick a date" style="width: 100%;" />\n        </y-form-model-item>\n        <y-form-model-item label="Instant delivery" prop="delivery">\n          <y-switch v-model="form.delivery" />\n        </y-form-model-item>\n        <y-form-model-item label="Activity type" prop="type">\n          <y-checkbox-group v-model="form.type">\n            <y-checkbox value="1" name="type">Online</y-checkbox>\n            <y-checkbox value="2" name="type">Promotion</y-checkbox>\n            <y-checkbox value="3" name="type">Offline</y-checkbox>\n          </y-checkbox-group>\n        </y-form-model-item>\n        <y-form-model-item label="Resources" prop="resource">\n          <y-radio-group v-model="form.resource">\n            <y-radio value="1">Sponsor</y-radio>\n            <y-radio value="2">Venue</y-radio>\n          </y-radio-group>\n        </y-form-model-item>\n        <y-form-model-item label="Activity form" prop="desc">\n          <y-input v-model="form.desc" type="textarea" />\n        </y-form-model-item>\n        <y-form-model-item label="ipv4" prop="ip">\n          <y-input-ip v-model="form.ip" />\n        </y-form-model-item>\n        <y-form-model-item :wrapper-col="{ span: 14, offset: 4 }">\n          <y-button type="primary" @click="onSubmit">Create</y-button>\n          <y-button style="margin-left: 10px;" @click="resetForm">Reset</y-button>\n        </y-form-model-item>\n    </y-form-model>',labelCol:{span:4},wrapperCol:{span:14},other:"",form:{name:"",region:void 0,date1:void 0,delivery:!1,type:[],resource:"",desc:"",ip:""},rules:{name:[{required:!0,message:"Please input Activity name",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],region:[{required:!0,message:"Please select Activity zone",trigger:"change"}],date1:[{required:!0,message:"Please pick a date",trigger:"change"}],type:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}],resource:[{required:!0,message:"Please select activity resource",trigger:"change"}],desc:[{required:!0,message:"Please input activity form",trigger:"blur"}],ip:[{validator:i,message:"ip 不正确",trigger:"blur"}]}}},methods:{onSubmit:function(){this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm:function(){this.$refs.ruleForm.resetFields()}}},s=m,d=a("2877"),p=Object(d["a"])(s,l,o,!1,null,null,null),u=p.exports,c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("com-show",[a("y-form-model",e._b({ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},"y-form-model",e.formItemLayoutWithOutLabel,!1),[e._l(e.dynamicValidateForm.domains,(function(t,n){return a("y-form-model-item",e._b({key:t.key,attrs:{label:0===n?"Domains":"",prop:"domains."+n+".value",rules:{required:!0,message:"domain can not be null",trigger:"blur"}}},"y-form-model-item",0===n?e.formItemLayout:{},!1),[a("y-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"please input domain"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),e.dynamicValidateForm.domains.length>1?a("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===e.dynamicValidateForm.domains.length},on:{click:function(a){return e.removeDomain(t)}}}):e._e()],1)})),a("y-form-model-item",e._b({},"y-form-model-item",e.formItemLayoutWithOutLabel,!1),[a("y-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:e.addDomain}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" Add field ")],1)],1),a("y-form-model-item",e._b({},"y-form-model-item",e.formItemLayoutWithOutLabel,!1),[a("y-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v(" Submit ")]),a("y-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v(" Reset ")])],1)],2),a("pre",{staticClass:"line-numbers"},[e._v("      "),a("code",{staticClass:"language-html",domProps:{textContent:e._s(e.html)}},[e._v("\n      ")]),e._v("\n    ")]),a("pre",{staticClass:"line-numbers"},[e._v("      "),a("code",{staticClass:"language-javascript"},[e._v("\n       export default {\n          data() {\n              return {\n                  languageJavascript: '',\n                  formItemLayout: {\n                      labelCol: {\n                      xs: { span: 24 },\n                      sm: { span: 4 },\n                      },\n                      wrapperCol: {\n                      xs: { span: 24 },\n                      sm: { span: 20 },\n                      },\n                  },\n                  formItemLayoutWithOutLabel: {\n                      wrapperCol: {\n                      xs: { span: 24, offset: 0 },\n                      sm: { span: 20, offset: 4 },\n                      },\n                  },\n                  dynamicValidateForm: {\n                      domains: [],\n                  },\n              };\n          },\n              methods: {\n                  submitForm(formName) {\n                      this.$refs[formName].validate(valid => {\n                          if (valid) {\n                          alert('submit!');\n                          } else {\n                          console.log('error submit!!');\n                          return false;\n                          }\n                      });\n                  },\n                  resetForm(formName) {\n                      this.$refs[formName].resetFields();\n                  },\n                  removeDomain(item) {\n                      let index = this.dynamicValidateForm.domains.indexOf(item);\n                      if (index !== -1) {\n                          this.dynamicValidateForm.domains.splice(index, 1);\n                      }\n                  },\n                  addDomain() {\n                      this.dynamicValidateForm.domains.push({\n                          value: '',\n                          key: Date.now(),\n                      });\n                  },\n              },\n          };\n          "+e._s(e.jt)+e._s(e.style)+"\n              .dynamic-delete-button {\n                  cursor: pointer;\n                  position: relative;\n                  top: 4px;\n                  font-size: 24px;\n                  color: #999;\n                  transition: all 0.3s;\n              }\n              .dynamic-delete-button:hover {\n                  color: #777;\n              }\n              .dynamic-delete-button[disabled] {\n                  cursor: not-allowed;\n                  opacity: 0.5;\n              }\n          "+e._s(e.jt)+"/"+e._s(e.style)+"\n      ")]),e._v("\n    ")])],1)],1)},y=[],f=(a("a434"),{data:function(){return{html:'<y-form-model ref="dynamicValidateForm" :model="dynamicValidateForm" v-bind="formItemLayoutWithOutLabel">\n        <y-form-model-item\n          v-for="(domain, index) in dynamicValidateForm.domains"\n          :key="domain.key"\n          v-bind="index === 0 ? formItemLayout : {}"\n          :label="index === 0 ? \'Domains\' : \'\'"\n          :prop="\'domains.\' + index + \'.value\'"\n          :rules="{\n            required: true,\n            message: \'domain can not be null\',\n            trigger: \'blur\',\n          }"\n        >\n          <y-input v-model="domain.value" placeholder="please input domain" style="width: 60%; margin-right: 8px" />\n          <a-icon\n            v-if="dynamicValidateForm.domains.length > 1"\n            class="dynamic-delete-button"\n            type="minus-circle-o"\n            :disabled="dynamicValidateForm.domains.length === 1"\n            @click="removeDomain(domain)"\n          />\n        </y-form-model-item>\n        <y-form-model-item v-bind="formItemLayoutWithOutLabel">\n          <y-button type="dashed" style="width: 60%" @click="addDomain"> <a-icon type="plus" /> Add field </y-button>\n        </y-form-model-item>\n        <y-form-model-item v-bind="formItemLayoutWithOutLabel">\n          <y-button type="primary" html-type="submit" @click="submitForm(\'dynamicValidateForm\')">\n            Submit\n          </y-button>\n          <y-button style="margin-left: 10px" @click="resetForm(\'dynamicValidateForm\')">\n            Reset\n          </y-button>\n        </y-form-model-item>',style:"style>",jt:"<",formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},dynamicValidateForm:{domains:[]}}},methods:{submitForm:function(e){this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",key:Date.now()})}}}),b=f,v=(a("6d2c"),Object(d["a"])(b,c,y,!1,null,null,null)),g=v.exports,h={name:"myFormModel",components:{RulesFrom:u,DynamicValidateForm:g},data:function(){return{tableData:[{params:"model",explain:"表单数据对象",type:"object",default:""},{params:"rules",explain:"表单验证规则",type:"object",default:""},{params:"hideRequiredMark",explain:"隐藏所有表单项的必选标记",type:"Boolean",default:"false"},{params:"labelAlign",explain:"label 标签的文本对齐方式",type:"'left' | 'right'",default:"'right'"},{params:"layout",explain:"表单布局",type:"'horizontal'|'vertical'|'inline'",default:"'horizontal'"},{params:"labelCol",explain:"label 标签布局，同 <Col> 组件，设置 span offset 值，如 {span: 3, offset: 12} 或 sm: {span: 3, offset: 12}",type:"object",default:""},{params:"wrapperCol",explain:"需要为输入控件设置布局样式时，使用该属性，用法同 labelCol",type:"object",default:""},{params:"colon",explain:"配置 Form.Item 的 colon 的默认值 (只有在属性 layout 为 horizontal 时有效)",type:"boolean",default:!0},{params:"validateOnRuleChange",explain:"是否在 rules 属性改变后立即触发一次验证",type:"boolean",default:!0}],tableDataChange:[{params:"submit",explain:"数据验证成功后回调事件",type:"Function(e:Event)"},{params:"validate",explain:"任一表单项被校验后触发",type:"\t被校验的表单项 prop 值，校验是否通过，错误消息（如果存在）"}],tableDataFn:[{params:"validate",explain:"对整个表单进行校验的方法，参数为一个回调函数。该回调函数会在校验结束后被调用，并传入两个参数：是否校验成功和未通过校验的字段。若不传入回调函数，则会返回一个 promise",type:"Function(callback: Function(boolean, object))"},{params:"validateField",explain:"对部分表单字段进行校验的方法",type:"Function(props: array | string, callback: Function(errorMessage: string))"},{params:"resetFields",explain:"对整个表单进行重置，将所有字段值重置为初始值并移除校验结果",type:"-"},{params:"clearValidate",explain:"移除表单项的校验结果。传入待移除的表单项的 prop 属性或者 prop 组成的数组，如不传则移除整个表单的校验结果",type:"Function(props: array | string)"}],tableDataItem:[{params:"prop",explain:"表单域 model 字段，在使用 validate、resetFields 方法的情况下，该属性是必填的",type:"string",default:""},{params:"rules",explain:"表单验证规则",type:"object | array",default:""},{params:"autoLink",explain:"是否自动关联表单域，对于大部分情况都可以使用自动关联，如果不满足自动关联的条件，可以手动关联，参见下方注意事项",type:"Boolean",default:"true"},{params:"colon",explain:"配合 label 属性使用，表示是否显示 label 后面的冒号",type:"boolean",default:"true"},{params:"extra",explain:"额外的提示信息，和 help 类似，当需要错误信息和提示文案同时出现时，可以使用这个。",type:"string|slot",default:"'horizontal'"},{params:"labelCol",explain:"label 标签布局，同 <Col> 组件，设置 span offset 值，如 {span: 3, offset: 12} 或 sm: {span: 3, offset: 12}",type:"object",default:""},{params:"wrapperCol",explain:"需要为输入控件设置布局样式时，使用该属性，用法同 labelCol",type:"object",default:""},{params:"hasFeedback",explain:"配合 validateStatus 属性使用，展示校验状态图标，建议只配合 Input 组件使用",type:"boolean",default:!1},{params:"help",explain:"提示信息，如不设置，则会根据校验规则自动生成",type:"string|slot"},{params:"label",explain:"label 标签的文本",type:"string|slot"}],tableDataRules:[{params:"trigger",explain:"校验触发的时机",type:"\t'blur' | 'change' | ['change', 'blur']"},{params:"enum",explain:"枚举类型",type:"string"},{params:"len",explain:"字段长度",type:"number"},{params:"max",explain:"最大长度",type:"number"},{params:"min",explain:"最小长度",type:"number"},{params:"message",explain:"校验文案",type:"string"},{params:"pattern",explain:"正则表达式校验",type:"RegExp"},{params:"required",explain:"是否必选",type:"boolean",default:"false"},{params:"transform",explain:"校验前转换字段值",type:"function(value) => transformedValue:any"},{params:"type",explain:"内建校验类型，可选项",type:"string",default:"'string'"},{params:"validator",explain:"自定义校验（注意，callback 必须被调用）",type:"function(rule, value, callback)"},{params:"whitespace",explain:"必选时，空格是否会被视为错误",type:"boolean",default:"false"}]}}},x=h,F=Object(d["a"])(x,n,r,!1,null,null,null);t["default"]=F.exports},"6d2c":function(e,t,a){"use strict";a("8598")},8598:function(e,t,a){}}]);
//# sourceMappingURL=formModel.3f12568e.js.map